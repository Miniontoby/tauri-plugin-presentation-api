var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}function n(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))}function i(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var r=Object.defineProperty,o=(e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})};function a(e,t=!1){let n=window.crypto.getRandomValues(new Uint32Array(1))[0],i=`_${n}`;return Object.defineProperty(window,i,{value:n=>(t&&Reflect.deleteProperty(window,i),null==e?void 0:e(n)),writable:!1,configurable:!0}),n}async function s(e,t={}){return new Promise(((n,i)=>{let r=a((e=>{n(e),Reflect.deleteProperty(window,`_${o}`)}),!0),o=a((e=>{i(e),Reflect.deleteProperty(window,`_${r}`)}),!0);window.__TAURI_IPC__({cmd:e,callback:r,error:o,...t})}))}function l(e,t="asset"){let n=encodeURIComponent(e);return navigator.userAgent.includes("Windows")?`https://${t}.localhost/${n}`:`${t}://localhost/${n}`}async function c(e){return s("tauri",e)}o({},{convertFileSrc:()=>l,invoke:()=>s,transformCallback:()=>a});async function d(e,t){return c({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function u(e,t,n){await c({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:t,payload:n}})}async function h(e,t,n){return c({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:a(n)}}).then((t=>async()=>d(e,t)))}async function m(e,t,n){return h(e,t,(t=>{n(t),d(e,t.id).catch((()=>{}))}))}o({},{TauriEvent:()=>p,emit:()=>g,listen:()=>y,once:()=>f});var p=(e=>(e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress",e))(p||{});async function y(e,t){return h(e,null,t)}async function f(e,t){return m(e,null,t)}async function g(e,t){return u(e,void 0,t)}o({},{CloseRequestedEvent:()=>z,LogicalPosition:()=>v,LogicalSize:()=>w,PhysicalPosition:()=>_,PhysicalSize:()=>b,UserAttentionType:()=>E,WebviewWindow:()=>A,WebviewWindowHandle:()=>L,WindowManager:()=>P,appWindow:()=>S,availableMonitors:()=>q,currentMonitor:()=>D,getAll:()=>x,getCurrent:()=>M,primaryMonitor:()=>C});var w=class{constructor(e,t){this.type="Logical",this.width=e,this.height=t}},b=class{constructor(e,t){this.type="Physical",this.width=e,this.height=t}toLogical(e){return new w(this.width/e,this.height/e)}},v=class{constructor(e,t){this.type="Logical",this.x=e,this.y=t}},_=class{constructor(e,t){this.type="Physical",this.x=e,this.y=t}toLogical(e){return new v(this.x/e,this.y/e)}},E=(e=>(e[e.Critical=1]="Critical",e[e.Informational=2]="Informational",e))(E||{});function M(){return new A(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0})}function x(){return window.__TAURI_METADATA__.__windows.map((e=>new A(e.label,{skip:!0})))}var S,W=["tauri://created","tauri://error"],L=class{constructor(e){this.label=e,this.listeners=Object.create(null)}async listen(e,t){return this._handleTauriEvent(e,t)?Promise.resolve((()=>{let n=this.listeners[e];n.splice(n.indexOf(t),1)})):h(e,this.label,t)}async once(e,t){return this._handleTauriEvent(e,t)?Promise.resolve((()=>{let n=this.listeners[e];n.splice(n.indexOf(t),1)})):m(e,this.label,t)}async emit(e,t){if(W.includes(e)){for(let n of this.listeners[e]||[])n({event:e,id:-1,windowLabel:this.label,payload:t});return Promise.resolve()}return u(e,this.label,t)}_handleTauriEvent(e,t){return!!W.includes(e)&&(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0)}},P=class extends L{async scaleFactor(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"scaleFactor"}}}})}async innerPosition(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerPosition"}}}}).then((({x:e,y:t})=>new _(e,t)))}async outerPosition(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerPosition"}}}}).then((({x:e,y:t})=>new _(e,t)))}async innerSize(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerSize"}}}}).then((({width:e,height:t})=>new b(e,t)))}async outerSize(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerSize"}}}}).then((({width:e,height:t})=>new b(e,t)))}async isFullscreen(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isFullscreen"}}}})}async isMaximized(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isMaximized"}}}})}async isDecorated(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isDecorated"}}}})}async isResizable(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isResizable"}}}})}async isVisible(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isVisible"}}}})}async theme(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"theme"}}}})}async center(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"center"}}}})}async requestUserAttention(e){let t=null;return e&&(t=1===e?{type:"Critical"}:{type:"Informational"}),c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"requestUserAttention",payload:t}}}})}async setResizable(e){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setResizable",payload:e}}}})}async setTitle(e){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setTitle",payload:e}}}})}async maximize(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"maximize"}}}})}async unmaximize(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unmaximize"}}}})}async toggleMaximize(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"toggleMaximize"}}}})}async minimize(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"minimize"}}}})}async unminimize(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unminimize"}}}})}async show(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"show"}}}})}async hide(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"hide"}}}})}async close(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"close"}}}})}async setDecorations(e){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setDecorations",payload:e}}}})}async setAlwaysOnTop(e){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setAlwaysOnTop",payload:e}}}})}async setSize(e){if(!e||"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSize",payload:{type:e.type,data:{width:e.width,height:e.height}}}}}})}async setMinSize(e){if(e&&"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMinSize",payload:e?{type:e.type,data:{width:e.width,height:e.height}}:null}}}})}async setMaxSize(e){if(e&&"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMaxSize",payload:e?{type:e.type,data:{width:e.width,height:e.height}}:null}}}})}async setPosition(e){if(!e||"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setPosition",payload:{type:e.type,data:{x:e.x,y:e.y}}}}}})}async setFullscreen(e){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFullscreen",payload:e}}}})}async setFocus(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFocus"}}}})}async setIcon(e){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIcon",payload:{icon:"string"==typeof e?e:Array.from(e)}}}}})}async setSkipTaskbar(e){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSkipTaskbar",payload:e}}}})}async setCursorGrab(e){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorGrab",payload:e}}}})}async setCursorVisible(e){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorVisible",payload:e}}}})}async setCursorIcon(e){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorIcon",payload:e}}}})}async setCursorPosition(e){if(!e||"Logical"!==e.type&&"Physical"!==e.type)throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorPosition",payload:{type:e.type,data:{x:e.x,y:e.y}}}}}})}async setIgnoreCursorEvents(e){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIgnoreCursorEvents",payload:e}}}})}async startDragging(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"startDragging"}}}})}async onResized(e){return this.listen("tauri://resize",e)}async onMoved(e){return this.listen("tauri://move",e)}async onCloseRequested(e){return this.listen("tauri://close-requested",(t=>{let n=new z(t);Promise.resolve(e(n)).then((()=>{if(!n.isPreventDefault())return this.close()}))}))}async onFocusChanged(e){let t=await this.listen("tauri://focus",(t=>{e({...t,payload:!0})})),n=await this.listen("tauri://blur",(t=>{e({...t,payload:!1})}));return()=>{t(),n()}}async onScaleChanged(e){return this.listen("tauri://scale-change",e)}async onMenuClicked(e){return this.listen("tauri://menu",e)}async onFileDropEvent(e){let t=await this.listen("tauri://file-drop",(t=>{e({...t,payload:{type:"drop",paths:t.payload}})})),n=await this.listen("tauri://file-drop-hover",(t=>{e({...t,payload:{type:"hover",paths:t.payload}})})),i=await this.listen("tauri://file-drop-cancelled",(t=>{e({...t,payload:{type:"cancel"}})}));return()=>{t(),n(),i()}}async onThemeChanged(e){return this.listen("tauri://theme-changed",e)}},z=class{constructor(e){this._preventDefault=!1,this.event=e.event,this.windowLabel=e.windowLabel,this.id=e.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}},A=class extends P{constructor(e,t={}){super(e),null!=t&&t.skip||c({__tauriModule:"Window",message:{cmd:"createWebview",data:{options:{label:e,...t}}}}).then((async()=>this.emit("tauri://created"))).catch((async e=>this.emit("tauri://error",e)))}static getByLabel(e){return x().some((t=>t.label===e))?new A(e,{skip:!0}):null}};function T(e){return null===e?null:{name:e.name,scaleFactor:e.scaleFactor,position:new _(e.position.x,e.position.y),size:new b(e.size.width,e.size.height)}}async function D(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"currentMonitor"}}}}).then(T)}async function C(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"primaryMonitor"}}}}).then(T)}async function q(){return c({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"availableMonitors"}}}}).then((e=>e.map(T)))}"__TAURI_METADATA__"in window?S=new A(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0}):(console.warn('Could not find "window.__TAURI_METADATA__". The "appWindow" value will reference the "main" window label.\nNote that this is not an issue if running this frontend on a browser instead of a Tauri window.'),S=new A("main",{skip:!0}));const O=new CSSStyleSheet;O.replaceSync(".modal {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  display: none;\r\n  z-index: 999999;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.modal .container {\r\n  display: flex;\r\n  flex-flow: column;\r\n  background-color: #ffffff;\r\n  box-shadow: 0px 0px 5px 2px rgba(0, 0, 0, 0.03);\r\n  padding-top: unset;\r\n}\r\n.modal .container.zoom {\r\n  transform: scale(0.5);\r\n}\r\n.modal .container.slide {\r\n  transform: translateY(-1000px);\r\n}\r\n.modal .container .header {\r\n  display: flex;\r\n  padding: 20px;\r\n  font-weight: 600;\r\n  justify-content: space-between;\r\n  border-bottom: 1px solid #e6e9ec;\r\n  align-items: center;\r\n}\r\n.modal .container .header h1 {\r\n  font-weight: 500;\r\n  color: #4d4d4d;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n.modal .container .header button {\r\n  appearance: none;\r\n  border: none;\r\n  background: transparent;\r\n  cursor: pointer;\r\n  font-size: 24px;\r\n  line-height: 24px;\r\n  padding-bottom: 4px;\r\n  cursor: pointer;\r\n  color: #9a9a9a;\r\n}\r\n.modal .container .header button:hover {\r\n  color: #676767;\r\n}\r\n.modal .container .content {\r\n  padding: 20px 15px;\r\n  flex: 1;\r\n  color: #0f0f0f;\r\n  text-align: left;\r\n}\r\n.modal .container .content .prompt-input input {\r\n  padding: 10px;\r\n  border-radius: 4px;\r\n  border: 1px solid #e6e9ec;\r\n  margin-top: 15px;\r\n  width: 100%;\r\n}\r\n.modal .container .footer {\r\n  border-top: 1px solid #e6e9ec;\r\n  background-color: #f9fafc;\r\n  padding: 15px;\r\n  display: flex;\r\n}\r\n.modal .container .footer button {\r\n  display: inline-flex;\r\n  appearance: none;\r\n  border: none;\r\n  background-color: #3a75d5;\r\n  color: #ffffff;\r\n  border-radius: 4px;\r\n  padding: 7px 12px;\r\n  font-size: 14px;\r\n  margin-right: 7px;\r\n  cursor: pointer;\r\n}\r\n.modal .container .footer button:last-child {\r\n  margin-right: 0;\r\n}\r\n.modal .container .footer button:hover {\r\n  background-color: #326fd3;\r\n}\r\n.modal .container .footer button.alt {\r\n  font-weight: 500;\r\n  background-color: #dadbdd;\r\n  color: #606266;\r\n}\r\n.modal .container .footer button.alt:hover {\r\n  background-color: #d5d6d8;\r\n}\r\n.modal .container .footer button.right {\r\n  margin-left: auto;\r\n}\r\n.modal.small .container {\r\n  width: 400px;\r\n}\r\n.modal.medium .container {\r\n  width: 600px;\r\n}\r\n.modal.large .container {\r\n  width: 900px;\r\n}\r\n.modal.full .container {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.modal.open {\r\n  display: flex;\r\n}\r\n.modal.open .container.zoom {\r\n  transform: scale(1);\r\n  transition: all 0.2s ease;\r\n}\r\n.modal.open .container.slide {\r\n  transform: translateY(0);\r\n  transition: all 0.5s ease;\r\n}\r\n\r\n\r\n.selector {\r\n\tbackground-color: #35383a !important;\r\n\tpadding: 25px;\r\n\tcolor: #c9c9c9 !important;\r\n\twidth: 400px;\r\n\tborder-radius: 10px;\r\n}\r\n.selector .close {\r\n\tposition: fixed;\r\n\twidth: 20px;\r\n\theight: 20px;\r\n\tright: 20px;\r\n\ttext-align: center;\r\n\t-webkit-touch-callout: none;\r\n\t-webkit-user-select: none;\r\n\t-khtml-user-select: none;\r\n\t-moz-user-select: none;\r\n\t-ms-user-select: none;\r\n\tuser-select: none;\r\n\tpadding: unset !important;\r\n\tbox-shadow: unset !important;\r\n\tborder-radius: 8px;\r\n}\r\n.selector .devices .device-card {\r\n\tdisplay: flex;\r\n\theight: 50px;\r\n}\r\n.selector .close:hover, .selector .devices .device-card:hover { background-color: #606469 !important; }\r\n.selector .devices .device-card .info { padding-left: 10px; }\r\n\r\n.selector .header {\r\n\tposition: absolute;\r\n\tborder-bottom: unset !important;\r\n\ttop: 0px;\r\n}\r\n.modal .container .content {\r\n\tcolor: inherit !important;\r\n}"),document.adoptedStyleSheets=[O];class k{constructor(e){this.options=Object.assign({element:null,effect:"zoom",state:"closed",size:"medium",content:null,footer:null,header:null,title:null},e),null==this.options.element&&(this.options.element=document.createElement("div"),this.options.element.classList.add("modal"),this.options.element.innerHTML='\n                <div class="container">\n                    <div class="header">\n                        <button class="close">&times;</button> \n                    </div>\n                    <div class="content"></div>\n                    <div class="footer">\n                        <button class="close">Close</button>\n                    </div>\n                </div>                        \n            ',document.body.appendChild(this.options.element)),this.options.element.querySelector(".container").classList.remove("zoom","slide"),this.options.element.querySelector(".container").classList.add(this.options.effect),null!=this.options.header&&(this.header=this.options.header),null!=this.options.content&&(this.content=this.options.content),null!=this.options.footer&&(this.footer=this.options.footer),null!=this.options.title&&(this.title=this.options.title),this.size=this.options.size,this._eventHandlers()}open(){this.options.state="open",this.options.element.style.display="flex",this.options.element.getBoundingClientRect(),this.options.element.classList.add("open"),this.options.onOpen&&this.options.onOpen(this)}close(){this.options.state="closed",this.options.element.classList.remove("open"),this.options.element.style.display="none",this.options.onClose&&this.options.onClose(this)}get state(){return this.options.state}get effect(){return this.options.effect}set effect(e){this.options.effect=e,this.options.element.querySelector(".container").classList.remove("zoom","slide"),this.options.element.querySelector(".container").classList.add(e)}get size(){return this.options.size}set size(e){this.options.size=e,this.options.element.classList.remove("small","large","medium","full"),this.options.element.classList.add(e)}get content(){return this.options.element.querySelector(".content").innerHTML}get contentElement(){return this.options.element.querySelector(".content")}set content(e){e?(this.options.element.querySelector(".content")||this.options.element.querySelector(".container").insertAdjacentHTML("afterbegin",'<div class="content"></div>'),this.options.element.querySelector(".content").innerHTML=e):this.options.element.querySelector(".content").remove()}get header(){return this.options.element.querySelector(".heading").innerHTML}get headerElement(){return this.options.element.querySelector(".header")}set header(e){e?(this.options.element.querySelector(".header")||this.options.element.querySelector(".container").insertAdjacentHTML("afterbegin",'<div class="header"></div>'),this.options.element.querySelector(".header").innerHTML=e):this.options.element.querySelector(".header").remove()}get title(){return this.options.element.querySelector(".header .title")?this.options.element.querySelector(".header .title").innerHTML:null}set title(e){this.options.element.querySelector(".header .title")||this.options.element.querySelector(".header").insertAdjacentHTML("afterbegin",'<h1 class="title"></h1>'),this.options.element.querySelector(".header .title").innerHTML=e}get footer(){return this.options.element.querySelector(".footer").innerHTML}get footerElement(){return this.options.element.querySelector(".footer")}set footer(e){e?(this.options.element.querySelector(".footer")||this.options.element.querySelector(".container").insertAdjacentHTML("beforeend",'<div class="footer"></div>'),this.options.element.querySelector(".footer").innerHTML=e):this.options.element.querySelector(".footer").remove()}_eventHandlers(){this.options.element.querySelectorAll(".close").forEach((e=>{e.onclick=e=>{e.preventDefault(),this.close()}})),this.options.element.onclick=e=>{e.target.classList.value==this.options.element.classList.value&&(e.preventDefault(),this.close())},document.addEventListener("keydown",(e=>{this.options.element.classList.contains("open")&&"Escape"===e.key&&this.close()}))}static initElements(){document.querySelectorAll("[data-modal]").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let n=document.querySelector(e.dataset.modal),i=new k({element:n});for(let e in n.dataset)i[e]&&(i[e]=n.dataset[e]);i.open()}))}))}static confirm(e,t,n){let i=new k({content:e,header:"",footer:'<button class="success">OK</button><button class="cancel alt">Cancel</button>'});i.footerElement.querySelector(".success").onclick=e=>{e.preventDefault(),t&&t(),i.close()},i.footerElement.querySelector(".cancel").onclick=e=>{e.preventDefault(),n&&n(),i.close()},i.open()}static alert(e,t){let n=new k({content:e,header:"",footer:'<button class="success">OK</button>'});n.footerElement.querySelector(".success").onclick=e=>{e.preventDefault(),t&&t(),n.close()},n.open()}static prompt(e,t,n,i){let r=new k({header:"",footer:'<button class="success">OK</button><button class="cancel alt">Cancel</button>'});r.content=e+`<div class="prompt-input"><input type="text" value="${t}" placeholder="Enter your text..."></div>`,r.footerElement.querySelector(".success").onclick=e=>{e.preventDefault(),n&&n(r.contentElement.querySelector(".prompt-input input").value),r.close()},r.footerElement.querySelector(".cancel").onclick=e=>{e.preventDefault(),i&&i(r.contentElement.querySelector(".prompt-input input").value),r.close()},r.open()}}var R,I,F=function(){function e(){this.el=document.createElement("Eventable"),this.el.obj=this}return e.prototype.addEventListener=function(){this.el.addEventListener(arguments[0],arguments[1])},e.prototype.dispatchEvent=function(e,t){void 0===t&&(t={});var n=new Event(e);Object.assign(n,t),this.el.dispatchEvent(n)},e}(),H=function(e,t,n){return'<div class="title-section"><b class="title">'.concat(e,'</b><div class="subtitle">').concat(t,'</div></div><p class="info">Cast to device:</p><div class="devices">').concat(n.map((function(e,t){return'<div class="device-card" data-id="'+t+'"><img class="icon" alt="icon"/><div class="info"><div>Screen '+t+"</div><div>Available</div></div></div>"})).join(""),"</div>")},N=function(e){function r(t){var n=e.call(this)||this;return R.add(n),n._monitors=[],n._idx=0,n.starting=!1,n.url="string"==typeof t?t:t[0],n.selectModal=new k({effect:"zoom",size:"medium",content:H("Presentation","hmm",[]),footer:"",onClose:function(){n.starting=!1,n.selectModal.reject&&n.selectModal.reject("Canceled!")}}),n.selectModal.contentElement.parentElement.classList.add("selector"),n.addEventListener("connectionavailable",(function(e){return n.onconnectionavailable(e)})),n}return t(r,e),r.prototype.start=function(){var e=this;return new Promise((function(t,r){return n(e,void 0,void 0,(function(){var e,n=this;return i(this,(function(i){switch(i.label){case 0:return this.starting&&r("OperationError"),[4,this.getAvailability()];case 1:return i.sent(),this.starting=!0,(e=0==this._monitors.length)?[4,this.getAvailability()]:[3,3];case 2:e=!i.sent(),i.label=3;case 3:return e?(r("No monitor for presentating!"),[2]):(this.selectModal.content=H("Presentation","hmm",this._monitors),this.selectModal.resolve=t,this.selectModal.reject=r,this.selectModal.contentElement.querySelectorAll(".device-card").forEach((function(e){e.onclick=function(t){t.preventDefault(),n.selectModal.resolve&&n.selectModal.resolve(function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}(n,R,"m",I).call(n,Number(e.dataset.id))),n.selectModal.close()}})),this.selectModal.open(),[2])}}))}))}))},r.prototype.reconnect=function(e){return new Promise((function(t,n){t(U.constructFromReconnect(String(e)))}))},r.prototype.getAvailability=function(){var e=this;return new Promise((function(t){return n(e,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return e=this,[4,q()];case 1:return e._monitors=n.sent(),this._monitors.length>1&&t(new $(!0)),t(new $(!1)),[2]}}))}))}))},r.prototype.onconnectionavailable=function(e){},r}(F);R=new WeakSet,I=function(e){var t=this,n=this._monitors[e];if(!n||e<0)return"Cannot find monitor!";this._idx++,this.starting=!1,console.log(this._idx,this.url,n);var i=new U(String(this._idx),this.url,n);return i.onconnect=function(){return t.dispatchEvent("connectionavailable",{connection:i})},i};var j,U=function(e){function r(t,r,o){var a=e.call(this)||this;return a.state=j.connecting,a.isReceiver=!1,a.listens=[],a.id=t,a.url=r,null!=o?(a.monitor=o,a.webview=new A(t,{url:a.url+"#PresentationReceiver",fullscreen:!0,width:o.size.width,height:o.size.height,x:o.position.x,y:o.position.y,resizable:!1}),a.webview.once("tauri://created",function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){return this.state=j.connected,this.onconnect(),this._listeners(),[2]}))}))}.bind(a)),a.webview.once("tauri://error",(function(e){console.log("An error accurred: ",e),this.state=j.connected,this.onconnect(),this._listeners()}))):(a.webview=A.getByLabel("main"),a.isReceiver=!0,a._listeners()),a.addEventListener("connect",(function(e){return a.onconnect(e)})),a.addEventListener("close",(function(e){return a.onclose(e)})),a.addEventListener("terminate",(function(e){return a.onterminate(e)})),a.addEventListener("message",(function(e){return a.onmessage(e)})),a}return t(r,e),r.constructFromReconnect=function(e){this.id=e;var t=A.getByLabel(e);return!!t&&(this.webview=t,this.state=j.connected,this._listeners(),this)},r.prototype._listeners=function(){return n(this,void 0,void 0,(function(){var e,t,n,r,o,a,s=this;return i(this,(function(i){switch(i.label){case 0:return t=(e=this.listens).push,[4,this.webview.listen("message",(function(e){e.data=e.payload,s.dispatchEvent("message",e)}))];case 1:return t.apply(e,[i.sent()]),r=(n=this.listens).push,[4,this.webview.listen("close",(function(e){s.isReceiver?s.webview.emit("close",e):s.state=j.closed,s.dispatchEvent("close",e),s.listens.forEach((function(e){return e()})),s.listens=[]}))];case 2:return r.apply(n,[i.sent()]),a=(o=this.listens).push,[4,this.webview.listen("terminate",(function(){s.isReceiver?(s.webview.emit("terminate"),s.dispatchEvent("terminate",{}),S.close()):(s.state=j.terminated,s.dispatchEvent("terminate",{}),s.webview.close()),s.listens.forEach((function(e){return e()})),s.listens=[]}))];case 3:return a.apply(o,[i.sent()]),[2]}}))}))},r.prototype.close=function(){this.state==j.connected&&this.webview.emit("close",{reason:"closing",message:""})},r.prototype.terminate=function(){this.state==j.connected&&this.webview.emit("terminate")},r.prototype.onconnect=function(){},r.prototype.onclose=function(){},r.prototype.onterminate=function(){},r.prototype.onmessage=function(e){},r.prototype.send=function(e){this.webview.emit("message",e)},r}(F),V=function(){this.connectionList=new Promise((function(e){return e(new K)}))},$=function(e){function r(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n.value=!1,n.value=t,n.addEventListener("change",(function(e){return n.onchange(e)})),window.requestAnimationFrame(n.getValue),n}return t(r,e),r.prototype.getValue=function(){n(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return[4,q()];case 1:return e=n.sent(),t=this.value,this.value=e.length>1,t!=this.value&&this.dispatchEvent("change"),window.requestAnimationFrame(this.getValue),[2]}}))}))},r.prototype.onchange=function(){},r}(F);!function(e){e[e.connecting=0]="connecting",e[e.connected=1]="connected",e[e.closed=2]="closed",e[e.terminated=3]="terminated"}(j||(j={}));var B,G=function(){};!function(e){e[e.error=0]="error",e[e.closed=1]="closed",e[e.wentaway=2]="wentaway"}(B||(B={}));var K=function(e){function n(){var e=this;return e.connections=[],e.connections=[new U("1",location.href,null)],e}return t(n,EventTarget),n.prototype.onconnectionavailable=function(){},n}(),Y=function(){this.defaultRequest=null,this.receiver=null,location.hash.includes("PresentationReceiver")&&(this.receiver=new V)};window.Presentation=Y,window.PresentationRequest=N,window.PresentationConnection=U,window.PresentationReceiver=V,window.PresentationAvailability=$;export{Y as Presentation2,$ as PresentationAvailability2,U as PresentationConnection2,G as PresentationConnectionAvailableEvent2,V as PresentationReceiver2,N as PresentationRequest2};
